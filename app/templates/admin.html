{% extends "base.html" %}
{% block title %}Admin | Reliable Walks{% endblock %}
{% block content %}
<section class="admin-panel admin-panel--focused">
  <div class="admin-container">
    <header class="admin-header admin-header--compact">
      <div>
        <p class="eyebrow">Operations HQ</p>
        <h1>Operations dashboard</h1>
        <p class="admin-subtitle">
          Skip the marketing gloss and dive straight into the tooling you rely on every day.
          Everything below is live and wired to the APIs.
        </p>
      </div>
      <dl class="admin-header__metrics">
        <div class="admin-metric">
          <dt>Open enquiries</dt>
          <dd data-role="enquiry-open-count">0</dd>
          <small>Waiting for a reply</small>
        </div>
        <div class="admin-metric">
          <dt>Inbox total</dt>
          <dd data-role="enquiry-total-count">0</dd>
          <small>Threads logged</small>
        </div>
        <div class="admin-metric">
          <dt>Response goal</dt>
          <dd>02:00</dd>
          <small>Avg during business hours</small>
        </div>
      </dl>
    </header>

    <div class="admin-body admin-body--focused">
      <div class="admin-console admin-console--focused">
        <div class="admin-console__heading">
          <p class="eyebrow">Live console</p>
          <div>
            <h1>Inbox + Ops</h1>
            <p class="admin-console__summary">
              Dive into enquiries, keep the booking waitlist tidy, and manage visitor bans without
              leaving this page.
            </p>
          </div>
        </div>
        <div class="admin-grid" data-role="admin-grid">
          <article
            class="admin-card admin-card--xl enquiry-card"
            data-card
            data-card-default
            data-role="enquiry-manager"
          >
            <button class="card-preview" data-card-toggle>
              <div class="card-preview__header">
                <p class="card-summary-line">Inbox health</p>
                <h2>Contact enquiries</h2>
              </div>
              <dl class="card-glance">
                <div class="card-glance__item">
                  <dt>Open</dt>
                  <dd class="card-glance__value" data-role="enquiry-open-count">0</dd>
                </div>
                <div class="card-glance__item">
                  <dt>Total</dt>
                  <dd class="card-glance__value" data-role="enquiry-total-count">0</dd>
                </div>
              </dl>
              <p class="card-toggle-hint">Tap to manage enquiries</p>
            </button>
            <div class="card-body" data-card-body>
              <div class="enquiry-panel">
                <div class="enquiry-panel__header">
                  <div>
                    <p class="eyebrow">Inbox summary</p>
                    <p class="admin-console__status" data-role="enquiry-summary">
                      Checking for new enquiries...
                    </p>
                  </div>
                  <div class="admin-console__actions">
                    <button class="button secondary" type="button" data-role="enquiry-refresh">
                      Refresh feed
                    </button>
                    <p class="form-feedback" data-role="enquiry-feedback" aria-live="polite"></p>
                  </div>
                </div>
                <div class="enquiry-panel__body">
                  <div class="enquiry-empty" data-role="enquiry-empty" hidden>
                    No enquiries just yet. New submissions from the contact page will appear here in
                    real time.
                  </div>
                  <ul class="enquiry-list" data-role="enquiry-list"></ul>
                </div>
              </div>
            </div>
          </article>

          <article class="admin-card schedule-card">
            <div class="card-preview">
              <p class="card-summary-line">Bookings</p>
              <h2>Schedule API</h2>
              <p>
                Slots added via <code>POST /api/admin/slots</code> appear on the booking page
                instantly. Confirm visits with <code>PATCH /api/admin/bookings/&lt;id&gt;/status</code>.
              </p>
            </div>
          </article>

          <article class="admin-card visitor-card">
            <div class="card-preview">
              <p class="card-summary-line">Security</p>
              <h2>Banned visitors</h2>
              <p>
                Keep serial spammers away by posting to <code>/api/admin/banned-visitors</code> and
                managing bans via the REST endpoints.
              </p>
            </div>
          </article>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
